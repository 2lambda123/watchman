<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Installation | Watchman</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Installation" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="System Requirements" />
<meta property="og:description" content="System Requirements" />
<link rel="canonical" href="https://facebook.github.io/watchman/docs/install.html" />
<meta property="og:url" content="https://facebook.github.io/watchman/docs/install.html" />
<meta property="og:site_name" content="Watchman" />
<meta property="og:image" content="https://facebook.github.io/watchman/static/og_image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-10-14T16:23:36-05:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://facebook.github.io/watchman/static/og_image.png" />
<meta property="twitter:title" content="Installation" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-14T16:23:36-05:00","datePublished":"2022-10-14T16:23:36-05:00","description":"System Requirements","headline":"Installation","image":"https://facebook.github.io/watchman/static/og_image.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://facebook.github.io/watchman/docs/install.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://facebook.github.io/watchman/static/logo.png"}},"url":"https://facebook.github.io/watchman/docs/install.html"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" type="text/css" media="screen" href="/watchman/css/main.css">
  <link rel="icon" href="/watchman/static/favicon.png" type="image/x-icon">

  <script async defer src="//cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react-with-addons.min.js"></script>
  <script async defer src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>

  
  <link type="application/atom+xml" rel="alternate" href="https://facebook.github.io/watchman/feed.xml" title="Watchman" />
</head>

  <body>
    <div class="socialBanner">
  <div>
    Support Ukraine 🇺🇦 
    <a href="https://opensource.fb.com/support-ukraine">
      Help Provide Humanitarian Aid to Ukraine</a>.
  </div>
</div>
<div id="fixed_header" class="fixedHeaderContainer visible">
  <header>
    <a href="https://facebook.github.io/watchman/"><img src="/watchman/static/logo.png" alt=""/><h2>Watchman</h2></a>
    <div class="navigationWrapper navigationFull" id="flat_nav">
      <nav class="navigation" role="navigation" aria-label="Website navigation">
        <ul>
          
          <li class="navItem navItemActive">
            <a href=/watchman/docs/install.html>Docs</a>
          </li>
          
          <li class="navItem ">
            <a href=/watchman/support.html>Support</a>
          </li>
          
          <li class="navItem ">
            <a href=http://github.com/facebook/watchman>GitHub</a>
          </li>
          
        </ul>
      </nav>
    </div>
    <div class="navigationWrapper navigationSlider" id="navigation_wrap"></div>
  </header>
  <script>
    var event = document.createEvent('Event');
    event.initEvent('slide', true, true);
    document.addEventListener('slide', function (e) {
      document.body.classList.toggle('sliderActive');
    }, false);
    var navData = [
      
      {
        href       : "/watchman/docs/install.html",
        text       : "Docs",
      },
      
      {
        href       : "/watchman/support.html",
        text       : "Support",
      },
      
      {
        href       : "http://github.com/facebook/watchman",
        text       : "GitHub",
      },
      
    ];
  </script>
  <script type="text/javascript">
  window.addEventListener('load', function() {
    var Nav = React.createClass({displayName: "Nav",
      getInitialState: function() {
        return {
          currentPath: window.location.pathname,
          slideoutActive: false,
        };
      },
      getDefaultProps: function() {
        return {
          data: navData,
        }
      },
      handleClick: function(id) {
        this.setState({
          slideoutActive: false,
        });
        document.dispatchEvent(event);
      },
      handleSlide: function(id) {
        this.setState({
          slideoutActive: !this.state.slideoutActive,
        });
        document.dispatchEvent(event);
      },
      // TODO: Add aria-label, aria-controls, and aira-expanded
      render: function() {
        var classes = React.addons.classSet({
          'navSlideout': true,
          'navSlideoutActive': this.state.slideoutActive,
        });
        var navClasses = React.addons.classSet({
          'slidingNav': true,
          'slidingNavActive': this.state.slideoutActive,
        });
        return (
          React.createElement("div", null,
            React.createElement("div", {className: classes, onClick: this.handleSlide},
              React.createElement("i", {className: "fa fa-bars"})
            ),
            React.createElement("nav", {className: navClasses},
              React.createElement("ul", null,
                this.props.data.map(this.renderNavItems)
              )
            )
          )
        );
      },
      renderNavItems: function(child, index) {
        var classes = React.addons.classSet({
          'navItem': true,
          'navItemActive': this.state.currentPath === child.href,
        });
        return (
          React.createElement("li", {key: index, className: classes},
            React.createElement("a", {onClick: this.handleClick, href: child.href}, child.text)
          )
        );
      },
    });

    function render(navData) {
      React.render(
        React.createElement(Nav, {data: navData}),
        document.getElementById('navigation_wrap')
      );
    }
    render(navData);
  });
  </script>
</div>

    <div class="navPusher">
      <div class="mainContainer blogContainer postContainer">
  <div id="main_wrap" class="wrapper mainWrapper">
    <nav class='toc' id="doc_nav" role="navigation" aria-label="Documentation navigation"></nav>
<script>
  var docnavData = [
    
    {
      group     : "Installation",
      items     : [
        
          
        {
          key : "/watchman/docs/install.html",
          title : "Installation",
          url : "/watchman/docs/install.html",
        },
        
          
        {
          key : "/watchman/docs/release-notes.html",
          title : "Release Notes",
          url : "/watchman/docs/release-notes.html",
        }
        
      ],
    },
    
    {
      group     : "Invocation",
      items     : [
        
          
        {
          key : "/watchman/docs/cli-options.html",
          title : "Command Line",
          url : "/watchman/docs/cli-options.html",
        },
        
          
        {
          key : "/watchman/docs/watchman-make.html",
          title : "watchman-make",
          url : "/watchman/docs/watchman-make.html",
        },
        
          
        {
          key : "/watchman/docs/watchman-wait.html",
          title : "watchman-wait",
          url : "/watchman/docs/watchman-wait.html",
        },
        
          
        {
          key : "/watchman/docs/watchman-replicate-subscription.html",
          title : "watchman-replicate-subscription",
          url : "/watchman/docs/watchman-replicate-subscription.html",
        },
        
          
        {
          key : "/watchman/docs/cppclient.html",
          title : "C++ Client",
          url : "/watchman/docs/cppclient.html",
        },
        
          
        {
          key : "/watchman/docs/nodejs.html",
          title : "NodeJS",
          url : "/watchman/docs/nodejs.html",
        },
        
          
        {
          key : "/watchman/docs/config.html",
          title : "Configuration Files",
          url : "/watchman/docs/config.html",
        },
        
          
        {
          key : "/watchman/docs/socket-interface.html",
          title : "Socket Interface",
          url : "/watchman/docs/socket-interface.html",
        }
        
      ],
    },
    
    {
      group     : "Compatibility",
      items     : [
        
          
        {
          key : "/watchman/docs/compatibility.html",
          title : "Compatibility Rules",
          url : "/watchman/docs/compatibility.html",
        },
        
          
        {
          key : "/watchman/docs/capabilities.html",
          title : "Capabilities",
          url : "/watchman/docs/capabilities.html",
        }
        
      ],
    },
    
    {
      group     : "Commands",
      items     : [
        
          
        {
          key : "/watchman/docs/cmd/clock.html",
          title : "clock",
          url : "/watchman/docs/cmd/clock.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/find.html",
          title : "find",
          url : "/watchman/docs/cmd/find.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/flush-subscriptions.html",
          title : "flush-subscriptions",
          url : "/watchman/docs/cmd/flush-subscriptions.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/get-config.html",
          title : "get-config",
          url : "/watchman/docs/cmd/get-config.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/get-sockname.html",
          title : "get-sockname",
          url : "/watchman/docs/cmd/get-sockname.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/list-capabilities.html",
          title : "list-capabilities",
          url : "/watchman/docs/cmd/list-capabilities.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/log.html",
          title : "log",
          url : "/watchman/docs/cmd/log.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/log-level.html",
          title : "log-level",
          url : "/watchman/docs/cmd/log-level.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/query.html",
          title : "query",
          url : "/watchman/docs/cmd/query.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/shutdown-server.html",
          title : "shutdown-server",
          url : "/watchman/docs/cmd/shutdown-server.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/since.html",
          title : "since",
          url : "/watchman/docs/cmd/since.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/state-enter.html",
          title : "state-enter",
          url : "/watchman/docs/cmd/state-enter.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/state-leave.html",
          title : "state-leave",
          url : "/watchman/docs/cmd/state-leave.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/subscribe.html",
          title : "subscribe",
          url : "/watchman/docs/cmd/subscribe.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/trigger.html",
          title : "trigger",
          url : "/watchman/docs/cmd/trigger.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/trigger-del.html",
          title : "trigger-del",
          url : "/watchman/docs/cmd/trigger-del.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/trigger-list.html",
          title : "trigger-list",
          url : "/watchman/docs/cmd/trigger-list.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/unsubscribe.html",
          title : "unsubscribe",
          url : "/watchman/docs/cmd/unsubscribe.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/version.html",
          title : "version",
          url : "/watchman/docs/cmd/version.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/watch.html",
          title : "watch",
          url : "/watchman/docs/cmd/watch.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/watch-del.html",
          title : "watch-del",
          url : "/watchman/docs/cmd/watch-del.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/watch-del-all.html",
          title : "watch-del-all",
          url : "/watchman/docs/cmd/watch-del-all.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/watch-list.html",
          title : "watch-list",
          url : "/watchman/docs/cmd/watch-list.html",
        },
        
          
        {
          key : "/watchman/docs/cmd/watch-project.html",
          title : "watch-project",
          url : "/watchman/docs/cmd/watch-project.html",
        }
        
      ],
    },
    
    {
      group     : "Queries",
      items     : [
        
          
        {
          key : "/watchman/docs/clockspec.html",
          title : "Clockspec",
          url : "/watchman/docs/clockspec.html",
        },
        
          
        {
          key : "/watchman/docs/file-query.html",
          title : "File Queries",
          url : "/watchman/docs/file-query.html",
        },
        
          
        {
          key : "/watchman/docs/simple-query.html",
          title : "Simple Pattern Syntax",
          url : "/watchman/docs/simple-query.html",
        },
        
          
        {
          key : "/watchman/docs/scm-query.html",
          title : "Source Control Aware Queries",
          url : "/watchman/docs/scm-query.html",
        }
        
      ],
    },
    
    {
      group     : "Expression Terms",
      items     : [
        
          
        {
          key : "/watchman/docs/expr/allof.html",
          title : "allof",
          url : "/watchman/docs/expr/allof.html",
        },
        
          
        {
          key : "/watchman/docs/expr/anyof.html",
          title : "anyof",
          url : "/watchman/docs/expr/anyof.html",
        },
        
          
        {
          key : "/watchman/docs/expr/dirname.html",
          title : "dirname & idirname",
          url : "/watchman/docs/expr/dirname.html",
        },
        
          
        {
          key : "/watchman/docs/expr/empty.html",
          title : "empty",
          url : "/watchman/docs/expr/empty.html",
        },
        
          
        {
          key : "/watchman/docs/expr/exists.html",
          title : "exists",
          url : "/watchman/docs/expr/exists.html",
        },
        
          
        {
          key : "/watchman/docs/expr/match.html",
          title : "match & imatch",
          url : "/watchman/docs/expr/match.html",
        },
        
          
        {
          key : "/watchman/docs/expr/name.html",
          title : "name & iname",
          url : "/watchman/docs/expr/name.html",
        },
        
          
        {
          key : "/watchman/docs/expr/not.html",
          title : "not",
          url : "/watchman/docs/expr/not.html",
        },
        
          
        {
          key : "/watchman/docs/expr/pcre.html",
          title : "pcre & ipcre",
          url : "/watchman/docs/expr/pcre.html",
        },
        
          
        {
          key : "/watchman/docs/expr/since.html",
          title : "since",
          url : "/watchman/docs/expr/since.html",
        },
        
          
        {
          key : "/watchman/docs/expr/size.html",
          title : "size",
          url : "/watchman/docs/expr/size.html",
        },
        
          
        {
          key : "/watchman/docs/expr/suffix.html",
          title : "suffix",
          url : "/watchman/docs/expr/suffix.html",
        },
        
          
        {
          key : "/watchman/docs/expr/type.html",
          title : "type",
          url : "/watchman/docs/expr/type.html",
        }
        
      ],
    },
    
    {
      group     : "Internals",
      items     : [
        
          
        {
          key : "/watchman/docs/bser.html",
          title : "BSER Binary Protocol",
          url : "/watchman/docs/bser.html",
        },
        
          
        {
          key : "/watchman/docs/casefolding.html",
          title : "Case-Insensitivity",
          url : "/watchman/docs/casefolding.html",
        },
        
          
        {
          key : "/watchman/contributing.html",
          title : "Contributing",
          url : "/watchman/contributing.html",
        },
        
          
        {
          key : "/watchman/docs/cookies.html",
          title : "Query Synchronization",
          url : "/watchman/docs/cookies.html",
        }
        
      ],
    },
    
    {
      group     : "Troubleshooting",
      items     : [
        
          
        {
          key : "/watchman/docs/troubleshooting.html",
          title : "Troubleshooting",
          url : "/watchman/docs/troubleshooting.html",
        }
        
      ],
    },
    
  ];
</script>
<script type="text/javascript">
window.addEventListener('load', function() {
  var DocNav = React.createClass({displayName: "DocNav",
    getInitialState: function() {
      return {
        toggleActive: false,
      };
    },
    getDefaultProps: function() {
      return {
        currentDoc: "Installation",
        currentGroup: "Installation",
        data: docnavData,
      }
    },
    handleSlide: function(id) {
      this.setState({
        toggleActive: !this.state.toggleActive,
      });
    },
    render: function() {
      var classes = React.addons.classSet({
        'navToggle': true,
        'navToggleActive': this.state.toggleActive,
      });
      var navClasses = React.addons.classSet({
        'toggleNav': true,
        'toggleNavActive': this.state.toggleActive,
      });
      return (
        React.createElement("div", {className: navClasses},
          React.createElement("section", null,
            this.props.data.map(this.renderNavGroups)
          ),
          React.createElement("div", {className: classes, onClick: this.handleSlide}, React.createElement("i", {className: "fa fa-chevron-circle-down"}))
        )
      );
    },
    renderNavGroups: function(child, index) {
      var classes = React.addons.classSet({
        'navGroup': true,
        'navGroupActive': this.props.currentGroup === child.group,
      });
      return (
        React.createElement("div", {className: classes, key: index},
          React.createElement("h3", null, child.group),
          React.createElement("ul", null,
            child.items.map(this.renderNavItems)
          )
        )
      );
    },
    renderNavItems: function(child, index) {
      var itemClasses = React.addons.classSet({
        'navListItem': true,
        'navListItemActive': this.props.currentDoc === child.title,
      });
      var classes = React.addons.classSet({
        'navItem': true,
        'navItemActive': this.props.currentDoc === child.title,
      });
      return (
        React.createElement("li", {className: itemClasses, key: index}, React.createElement("a", {className: classes, href: child.url},  child.title))
      );
    },
  });

  function docNavRender(docnavData) {
    React.render(
      React.createElement(DocNav, {data: docnavData}),
      document.getElementById('doc_nav')
    );
  }
  docNavRender(docnavData);
});
</script>

    <div class="post">
  <header class="post-header">
    <h1 class="post-title">Installation</h1>
  </header>

  <article class="post-content">
   
      <h2 id="system-requirements">System Requirements</h2>

<p>Watchman is known to compile and pass its test suite on:</p>

<ul>
  <li><i class="fa fa-linux"></i> Linux systems with <code class="language-plaintext highlighter-rouge">inotify</code></li>
  <li><i class="fa fa-apple"></i> macOS (uses <code class="language-plaintext highlighter-rouge">FSEvents</code> on 10.7+,
<code class="language-plaintext highlighter-rouge">kqueue(2)</code> on earlier versions)</li>
  <li><i class="fa fa-windows"></i> Windows 10 (64-bit) and up. Windows 7 support is provided by community patches</li>
</ul>

<p>Watchman used to support the following systems, but no one is actively
maintaining them.  The core of the code should be OK, but they likely don’t
build.  We’d love it if someone would step forward to maintain them:</p>

<ul>
  <li>BSDish systems (FreeBSD 9.1, OpenBSD 5.2) that have the
<code class="language-plaintext highlighter-rouge">kqueue(2)</code> facility</li>
  <li>Illumos and Solaris style systems that have <code class="language-plaintext highlighter-rouge">port_create(3C)</code></li>
</ul>

<p>Watchman relies on the operating system facilities for file notification,
which means that you will likely have very poor results using it on any
kind of remote or distributed filesystem.</p>

<p>Watchman does not currently support any other operating system not covered by
the list above.</p>

<h2 id="windows">Windows</h2>

<h3 id="prebuilt-binaries">Prebuilt Binaries</h3>

<ol>
  <li>Download and extract the windows release from the <a href="https://github.com/facebook/watchman/releases/latest">latest release</a></li>
  <li>It will be named something like <code class="language-plaintext highlighter-rouge">watchman-vYYYY.MM.DD.00-windows.zip</code></li>
  <li>It contains a <code class="language-plaintext highlighter-rouge">bin</code> folder.  Move that somewhere appropriate and update your <code class="language-plaintext highlighter-rouge">PATH</code> environment to reference that location.</li>
</ol>

<p>If you encounter issues with the Windows version of watchman, please report
them via GitHub!  <a href="https://github.com/facebook/watchman/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+Windows">You can find the list of known Windows issues here</a>.</p>

<h3 id="installing-via-chocolatey">Installing via Chocolatey</h3>

<p>Watchman is available via the <a href="https://community.chocolatey.org/packages/watchman">Chocolatey</a> Windows package manager.  Installation is as simple as:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><span class="n">PS</span><span class="w"> </span><span class="nx">C:\</span><span class="err">&gt;</span><span class="w"> </span><span class="nx">choco</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">watchman</span><span class="w">
</span></code></pre></div></div>

<p>The package is maintained by the community rather than by Meta, so if you experience issues with installation or uninstallation,
you should <a href="https://chocolatey.org/packages/watchman/ContactOwners">contact the package maintainers</a> for assistance.</p>

<h2 id="macos">macOS</h2>

<h3 id="-homebrew"><a name="homebrew-instructions"></a> Homebrew</h3>

<p>Homebrew’s <a href="https://formulae.brew.sh/formula/watchman#default">Watchman package</a> is community-maintained, but it works well for many.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><span class="nv">$ </span>brew update
<span class="nv">$ </span>brew <span class="nb">install </span>watchman
</code></pre></div></div>

<p>If for some reason you can’t wait for the Homebrew package to update,
you can install the latest build from GitHub:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><span class="nv">$ </span>brew <span class="nb">install</span> <span class="nt">--HEAD</span> watchman
</code></pre></div></div>

<h3 id="-macports"><a name="macports"></a> MacPorts</h3>

<p>To install the package maintained by <a href="https://ports.macports.org/port/watchman/">MacPorts</a>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><span class="nv">$ </span><span class="nb">sudo </span>port <span class="nb">install </span>watchman
</code></pre></div></div>

<h3 id="prebuilt-binaries-1">Prebuilt Binaries</h3>

<ol>
  <li>Download and extract the macOS release from the <a href="https://github.com/facebook/watchman/releases/latest">latest release</a></li>
  <li>It will be named something like <code class="language-plaintext highlighter-rouge">watchman-vYYYY.MM.DD.00-macos.zip</code></li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><span class="nv">$ </span>unzip watchman-<span class="k">*</span><span class="nt">-macos</span>.zip
<span class="nv">$ </span><span class="nb">cd </span>watchman-vYYYY.MM.DD.00-macos
<span class="nv">$ </span><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /usr/local/<span class="o">{</span>bin,lib<span class="o">}</span> /usr/local/var/run/watchman
<span class="nv">$ </span><span class="nb">sudo cp </span>bin/<span class="k">*</span> /usr/local/bin
<span class="nv">$ </span><span class="nb">sudo cp </span>lib/<span class="k">*</span> /usr/local/lib
<span class="nv">$ </span><span class="nb">sudo chmod </span>755 /usr/local/bin/watchman
<span class="nv">$ </span><span class="nb">sudo chmod </span>2777 /usr/local/var/run/watchman
</code></pre></div></div>

<p>The Watchman binaries are not signed, so manual approval in Security &amp; Privacy in System Preferences may be necessary.</p>

<h2 id="linux">Linux</h2>

<h3 id="homebrew">Homebrew</h3>

<p>If you use Homebrew on Linux, it’s a great way to get a recent Watchman build.</p>

<p>Follow the <a href="#homebrew-instructions">macOS instructions above</a>.</p>

<h3 id="fedora-prebuilt-rpms">Fedora (Prebuilt RPMs)</h3>

<p><strong>Warning</strong>: Do not install the Fedora-supplied Watchman package. It is old and missing security, bug, and performance fixes.</p>

<ol>
  <li>From the <a href="https://github.com/facebook/watchman/releases/latest">latest release</a>, download the .rpm corresponding to your Fedora version</li>
  <li><code class="language-plaintext highlighter-rouge">sudo dnf localinstall watchman-$VERSION.fc$FEDORA_VERSION.x86_64.rpm</code></li>
  <li>Confirm successful installation by running <code class="language-plaintext highlighter-rouge">watchman version</code></li>
</ol>

<h3 id="ubuntu-prebuilt-debs">Ubuntu (Prebuilt Debs)</h3>

<p><strong>Warning</strong>: Do not install the Ubuntu-supplied Watchman package. It is old and missing security, bug, and performance fixes.</p>

<ol>
  <li>From the <a href="https://github.com/facebook/watchman/releases/latest">latest release</a>, download the .deb corresponding to your Ubuntu version</li>
  <li><code class="language-plaintext highlighter-rouge">sudo dpkg -i watchman_$UBUNTU_RELEASE_$VERSION.deb</code></li>
  <li>You will likely see errors about unresolved dependencies. The next step will resolve them.</li>
  <li><code class="language-plaintext highlighter-rouge">sudo apt-get -f install</code></li>
  <li>Confirm successful installation by running <code class="language-plaintext highlighter-rouge">watchman version</code></li>
</ol>

<h3 id="-building-from-source"><a name="building-from-source"></a> Building from Source</h3>

<p>Download a <a href="https://github.com/facebook/watchman/releases/latest">source snapshot from the latest release</a> or <a href="https://github.com/facebook/watchman/">clone from GitHub</a>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><span class="nv">$ </span><span class="nb">cd </span>watchman

<span class="c"># Optionally, to save time, you can ask Watchman's build process to install system dependencies</span>
<span class="nv">$ </span><span class="nb">sudo</span> ./install-system-packages.sh

<span class="nv">$ </span>./autogen.sh
</code></pre></div></div>

<h3 id="prebuilt-binaries-2">Prebuilt Binaries</h3>

<p><strong>Note</strong>: Our binaries are built from the main branch only.  We don’t provide binaries for v4.9.0.</p>

<p><strong>Note</strong>: The Linux binaries are compiled on a GitHub Action VM (ubuntu-20.04 at the time of this writing),
and Linux binaries are <a href="https://github.com/facebook/watchman/issues/1019">not generally compatible across distributions</a>,
so try the prebuilt Fedora, Ubuntu, or Homebrew packages first.</p>

<p>Watchman is continuously deployed as it passes our internal test validation
inside Meta and doesn’t use manually assigned or “approved” version numbers.</p>

<p>Outside Meta we have automation that cuts a tag and builds binaries on Monday of
each week and assigns a tag based on the date.  That process is in a beta
state; some or all of the binaries may not be present for any given tag.</p>

<ol>
  <li>Download and extract the release for your system from the <a href="https://github.com/facebook/watchman/releases/latest">latest release</a></li>
  <li>It will be named something like <code class="language-plaintext highlighter-rouge">watchman-vYYYY.MM.DD.00-linux.zip</code></li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><span class="nv">$ </span>unzip watchman-<span class="k">*</span><span class="nt">-linux</span>.zip
<span class="nv">$ </span><span class="nb">cd </span>watchman-vYYYY.MM.DD.00-linux
<span class="nv">$ </span><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /usr/local/<span class="o">{</span>bin,lib<span class="o">}</span> /usr/local/var/run/watchman
<span class="nv">$ </span><span class="nb">sudo cp </span>bin/<span class="k">*</span> /usr/local/bin
<span class="nv">$ </span><span class="nb">sudo cp </span>lib/<span class="k">*</span> /usr/local/lib
<span class="nv">$ </span><span class="nb">sudo chmod </span>755 /usr/local/bin/watchman
<span class="nv">$ </span><span class="nb">sudo chmod </span>2777 /usr/local/var/run/watchman
</code></pre></div></div>

<h2 id="system-specific-preparation">System Specific Preparation</h2>

<h3 id="linux-inotify-limits">Linux inotify Limits</h3>

<p>The <code class="language-plaintext highlighter-rouge">inotify(7)</code> subsystem has three important tunings that impact watchman.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/proc/sys/fs/inotify/max_user_instances</code> impacts how many different
root dirs you can watch.</li>
  <li><code class="language-plaintext highlighter-rouge">/proc/sys/fs/inotify/max_user_watches</code> impacts how many dirs you
can watch across all watched roots.</li>
  <li><code class="language-plaintext highlighter-rouge">/proc/sys/fs/inotify/max_queued_events</code> impacts how likely it is that
your system will experience a notification overflow.</li>
</ul>

<p>You obviously need to ensure that <code class="language-plaintext highlighter-rouge">max_user_instances</code> and <code class="language-plaintext highlighter-rouge">max_user_watches</code>
are set so that the system is capable of keeping track of your files.</p>

<p><code class="language-plaintext highlighter-rouge">max_queued_events</code> is important to size correctly; if it is too small, the
kernel will drop events and watchman won’t be able to report on them.  Making
this value bigger reduces the risk of this happening.</p>

<p>Watchman has two simple strategies for mitigating an overflow of
<code class="language-plaintext highlighter-rouge">max_queued_events</code>:</p>

<ul>
  <li>It uses a dedicated thread to consume kernel events as quickly as possible</li>
  <li>When the kernel reports an overflow, watchman will assume that all the files
have been modified and will re-crawl the directory tree as though it had just
started watching the dir.</li>
</ul>

<p>This means that if an overflow does occur, you won’t miss a legitimate change
notification, but instead will get spurious notifications for files that
haven’t actually changed.</p>

<h3 id="mac-os-file-descriptor-limits">Mac OS File Descriptor Limits</h3>

<p><em>Only applicable on macOS 10.6 and earlier</em></p>

<p>The default per-process descriptor limit on macOS is extremely low (256!).</p>

<p>Watchman will attempt to raise its descriptor limit to match
<code class="language-plaintext highlighter-rouge">kern.maxfilesperproc</code> when it starts up, so you shouldn’t need to mess with
<code class="language-plaintext highlighter-rouge">ulimit</code>; just raising the sysctl should do the trick.</p>

<p>The following will raise the limits to allow 10 million files total, with 1
million files per process until your next reboot.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code><span class="nv">$ </span><span class="nb">sudo </span>sysctl <span class="nt">-w</span> kern.maxfiles<span class="o">=</span>10485760
<span class="nv">$ </span><span class="nb">sudo </span>sysctl <span class="nt">-w</span> kern.maxfilesperproc<span class="o">=</span>1048576
</code></pre></div></div>

<p>Putting the following into a file named <code class="language-plaintext highlighter-rouge">/etc/sysctl.conf</code> on macOS will cause
these values to persist across reboots:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="rougeHighlight"><code>kern.maxfiles=10485760
kern.maxfilesperproc=1048576
</code></pre></div></div>

    
  </article>
</div>

  </div>
</div>


      <div class="footerContainer">
  <div id="footer_wrap" class="wrapper footerWrapper">
    <section id="fb_oss" class="fbOpenSourceFooter">
      <a href="https://opensource.facebook.com/" target="_blank"><img src="/watchman/static/oss_logo.png" alt="Meta Open Source Home" title="Meta Open Source" /></a>
    </section>
  </div>
</div>
<script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = window.location.href.replace(window.location.hash, '') + "#" + id;
    anchor.innerHTML = "<i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  window.addEventListener('load', function() {
    var contentBlock = document.getElementsByClassName("post")[0] || document.getElementsByClassName("news")[0];
    if (!contentBlock) {
      return;
    }
    for (var level = 1; level <= 6; level++) {
      linkifyAnchors(level, contentBlock);
    }
  });
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44373548-13', 'auto');
  ga('send', 'pageview');
</script>
<script>
  window.addEventListener('load', function() {
    hljs.initHighlightingOnLoad();

    // Async load some styles
    function loadStyle(href) {
      var s = document.createElement('link');
      s.setAttribute('rel', 'stylesheet');
      s.setAttribute('href', href);
      s.setAttribute('type', 'text/css');
      document.getElementsByTagName('head')[0].appendChild(s);
    }
    loadStyle("//nuclide.io/static/fonts/332720/BC699FA675F9356E3.css");
    loadStyle("//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css");
    loadStyle("//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css");
  });
</script>

    </div>
  </body>

</html>
