<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-release-notes">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Release Notes | Watchman</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://facebook.github.io/watchman/img/watchman-social-card.png"><meta data-rh="true" name="twitter:image" content="https://facebook.github.io/watchman/img/watchman-social-card.png"><meta data-rh="true" property="og:url" content="https://facebook.github.io/watchman/docs/release-notes"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Release Notes | Watchman"><meta data-rh="true" name="description" content="Watchman is continuously deployed inside Facebook, which means that we don&#x27;t"><meta data-rh="true" property="og:description" content="Watchman is continuously deployed inside Facebook, which means that we don&#x27;t"><link data-rh="true" rel="icon" href="/watchman/img/favicon.png"><link data-rh="true" rel="canonical" href="https://facebook.github.io/watchman/docs/release-notes"><link data-rh="true" rel="alternate" href="https://facebook.github.io/watchman/docs/release-notes" hreflang="en"><link data-rh="true" rel="alternate" href="https://facebook.github.io/watchman/docs/release-notes" hreflang="x-default"><link rel="stylesheet" href="/watchman/assets/css/styles.020fe8fb.css">
<link rel="preload" href="/watchman/assets/js/runtime~main.9f7e7ff6.js" as="script">
<link rel="preload" href="/watchman/assets/js/main.eda62e9f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/watchman/"><div class="navbar__logo"><img src="/watchman/img/logo.png" alt="Watchman Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/watchman/img/logo.png" alt="Watchman Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Watchman</b></a><a class="navbar__item navbar__link" href="/watchman/docs/install">Documentation</a><a class="navbar__item navbar__link" href="/watchman/support">Support</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/watchman" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/watchman/docs/install">Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/watchman/docs/install">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/watchman/docs/release-notes">Release Notes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/cli-options">Invocation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/capabilities">Compatibility</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/cmd/clock">Commands</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/clockspec">Queries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/expr/allof">Expression Terms</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/bser">Internals</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/watchman/docs/troubleshooting">Troubleshooting</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/watchman/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Installation</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Release Notes</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Release Notes</h1></header><p>Watchman is continuously deployed inside Facebook, which means that we don&#x27;t
explicitly maintain version numbers. We have automation that cuts a weekly tag
with a named derived from the date. You can learn more about how to reason about
supported <em>capabilities</em> and our backwards compatibility guidelines in the
<a href="/watchman/docs/compatibility">Compatibility Rules</a> docs.</p><p>We focus on the highlights only in these release notes. For a full history that
includes all of the gory details, please see
<a href="https://github.com/facebook/watchman/commits/main" target="_blank" rel="noopener noreferrer">the commit history on GitHub</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-v2020071300">Watchman v2020.07.13.00<a class="hash-link" href="#watchman-v2020071300" title="Direct link to heading">​</a></h3><ul><li>Added script <code>watchman-replicate-subscription</code>. It can replicate an existing
watchman subscription. Integrators can use this script to validate watchman
notifications their client is receiving.</li><li>Added support for suffix sets in suffix expressions. You now can specify
multiple suffixes to match against by setting the second argument to a list of
suffixes. See <code>suffix-set</code> documentation for
<a href="/watchman/docs/expr/suffix#suffix-set">more details</a></li><li>pywatchman: introduced new pywatchman_aio client for python</li><li>Windows: we no longer trust environment variables to locate the state
directory which should result in a better experience for users that mix
cygwin, mingw, native windows and/or WSL or other environments</li><li>Windows: we now support unix domain sockets on Windows 10. The CLI will prefer
to use unix domain sockets when available.</li></ul><p>We weren&#x27;t great at updating the release notes since the prior release; there
was a lot of work to support our sister project EdenFS that isn&#x27;t broadly
relevant to those outside FB at the time of writing.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-490-2017-08-24">Watchman 4.9.0 (2017-08-24)<a class="hash-link" href="#watchman-490-2017-08-24" title="Direct link to heading">​</a></h3><ul><li>New field: <code>content.sha1hex</code>. This field expands to the SHA1 hash of the file
contents, expressed in hex digits (40 character hex string). Watchman
maintains a cache of the content hashes and can compute the hash on demand and
also heuristically as files are changed. This is useful for tooling that wants
to perform more intelligent cache invalidation or build artifact fetching from
content addressed storage.</li><li>Experimental feature: Source Control Aware query mode. Currently supports only
Mercurial (patches to add Git support are welcomed!). SCM aware query mode
helps to keep response sizes closer to <code>O(what-you-changed)</code> than to
<code>O(all-repo-changes)</code> when rebasing your code. Using this feature effectively
may require some additional infrastructure to compute and associate data with
revisions from your repo.</li><li>Fixed an issue that resulted in the perf logging thread deadlocking when
<code>perf_logger_command</code> is enabled in the global configuration</li><li>Fixed an issue where queries larger than 1MB would likely result in a PDU
error response.</li><li>Reduced lock contention for subscriptions that do no use the advanced settling
(<code>drop</code>, <code>defer</code>) options.</li><li>Fixed <code>since</code> generator behavior when using unix timestamps rather than the
preferred clock string syntax</li><li>Improved the reporting of &quot;new&quot; files in watchman results</li><li>Improved performance of handling changes on case insensitive filesystems</li><li>Windows: promoted from alpha to beta status!</li><li>Windows: fixed some performance and reliability issues</li><li>Windows: now operates correctly on Windows 7</li><li>Windows: can now see and report symlinks and junction points</li><li>Windows: fixed potential deadlock in trigger deletion</li><li>Windows: fixed stack trace rendering on win32</li><li>Windows: improved IO scheduling around deletes on win32</li><li>Windows: improved handling of case insensitive win32 driver letters</li><li>pywatchman: the python wheel format is used for publishing watchman pypi
package</li><li>pywatchman: now watchman path is configurable in python client</li><li>pywatchman: now python client can be used as a context manager</li><li>Solaris: support for Solaris has been removed. If you&#x27;d like to commit to
testing and maintaining Solaris support, we&#x27;d love to hear from you!</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-480-never-formally-released">Watchman 4.8.0 (never formally released)<a class="hash-link" href="#watchman-480-never-formally-released" title="Direct link to heading">​</a></h3><p>Whoops, we never got around to tagging this beyond a release candidate tag!</p><ul><li>New command <code>flush-subscriptions</code> to synchronize subscriptions associated with
the current session.</li><li>On Windows, return <code>/</code> as the directory separator. Previously we used <code>\</code>.
This change should be pretty neutral for clients, and makes it easier to work
with both the internals and the integration test infrastructure.</li><li>Enforce socket Unix groups more strongly — Watchman will now refuse to start
if it couldn&#x27;t gain the right group memberships, as can happen for sites that
are experiencing intermittent LDAP connectivity problems.</li><li>pywatchman now officially supports Python 3. pywatchman will return Unicode
strings (possibly with surrogate escapes) by default, but can optionally
return bytestrings. Note that on Python 3, pywatchman requires Watchman 4.8
and above. The Python 2 interface and requirements remain unchanged.</li><li>Prior to 4.8, methods on the Java WatchmanClient that returned
ListenableFutures would swallow exceptions and hang in an unfinished state
under situations like socket closure or thread death. This has been fixed, and
now ListenableFutures propagate exception conditions immediately. (Note that
this is typically unrecoverable, and users should create a new WatchmanClient
to re-establish communication with Watchman.) See #412.</li><li>The minimum Java version for the Watchman Java client has always been 1.7, but
it was incorrectly described to be 1.6. The Java client&#x27;s build file has been
fixed accordingly.</li><li>Watchman was converted from C to C++. The conversion exposed several
concurrency bugs, all of which have now been fixed.</li><li>Subscription queries are now executed in the context of the client thread,
which means that subscriptions are dispatched in parallel. Previously,
subscriptions would be serially dispatched and block the disk IO thread.</li><li>Triggers are now dispatched in parallel and waits are managed in their own
threads (one thread per trigger). This improves concurrency and resolves a
couple of waitpid related issues where watchman may not reap spawned children
in a timely fashion, or may spin on CPU until another child is spawned.</li><li>Fixed an object lifecycle management issue that could cause a crash when aging
out old/transient files.</li><li>Implement an upgraded wire protocol, BSERv2, on the server and in pywatchman.
BSERv2 can carry information about string encoding over the wire. This lets
pywatchman convert to Unicode strings on Python 3. Clients and servers know
how to transparently fall back to BSERv1.</li><li>OS X: we no longer use socket activation when registering with launchd. This
was the source of some upgrade problems for mac Homebrew users.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-470-2016-09-10">Watchman 4.7.0 (2016-09-10)<a class="hash-link" href="#watchman-470-2016-09-10" title="Direct link to heading">​</a></h3><ul><li>Reduced memory usage by 40%</li><li>Queries can now run with a shared lock. It is recommended that clients move
away from the <code>n:FOO</code> style server side named cursor clockspecs to take full
advantage of this.</li><li>Added new <code>glob</code> generator as a walking strategy for queries. This allows
watchman to evaluate globs in the most efficient manner. Our friends in the
Buck project have already integrated this into their <code>BUCK</code> file parsing to
evaluate globs without touching the filesystem!</li><li>Added <code>&quot;case_sensitive&quot;: true</code> option to queries to force matches to happen in
a case sensitive manner, even if the watched root is on a case insensitive
filesystem. This is used to accelerate certain types of internal traversal: if
we know that a path is case sensitive we can perform an <code>O(1)</code> lookup where we
would otherwise have to perform an <code>O(number-of-directory-entries)</code> scan and
compare.</li><li>Fixed a race condition during subscription initiation that could emit
incorrect clock values.</li><li>Fixed spurious over-notification for parent directories of changed files on
Mac.</li><li>Fixed some reliability issues on Windows</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-460-2016-07-09">Watchman 4.6.0 (2016-07-09)<a class="hash-link" href="#watchman-460-2016-07-09" title="Direct link to heading">​</a></h3><ul><li>Improved I/O scheduling when processing recursive deletes and deep directory
rename operations.</li><li>Improved performance of the <code>ignore_dirs</code> configuration option on OS X and
Windows systems. We take advantage of an undocumented (but supported!) API to
further accelerate this for the first 8 entries in the <code>ignore_dirs</code> on OS X.
Users that depend on this configuration to avoid recrawls will want to review
and prioritize their most active build dirs to the front of the <code>ignore_dirs</code>
specified in their <code>.watchmanconfig</code> file.</li><li>Added an optional recrawl recovery strategy for OS X that will attempt to
resync from the fseventsd journal rather than performing a full filesystem
walk. This is currently disabled by default but will likely be enabled by
default in the next Watchman release. You can enable this by setting
<code>fsevents_try_resync: true</code> in either <code>/etc/watchman.json</code> or your
<code>.watchmanconfig</code>. This should reduce the frequency of recrawl warnings for
some users/workloads, and also improves I/O for users with extremely large
trees.</li><li>Fixed accidental exponential time complexity issue with recursive deletes and
deep directory rename operations on case-insensitive filesystems (such as OS
X). This manifested as high CPU utilization for extended periods of time.</li><li>Added support for allowing non-owner access to a Watchman instance. Only the
owner is authorized to create or delete watches. Non-owners can view
information about existing watches. Access control is based on unix domain
socket permissions. The new but not yet documented configuration options
<code>sock_group</code> and <code>sock_access</code> can be used to control this new behavior.</li><li>Added support for inetd-style socket activation of the watchman service.
<a href="https://github.com/facebook/watchman/commit/2985377eaf8c8538b28fae9add061b67991a87c2" target="_blank" rel="noopener noreferrer">this commit includes a sample configuration for systemd</a>.</li><li>Added the <code>symlink_target</code> field to the stored metadata for files. This holds
the text of the symbolic link for symlinks. You can test whether it is
supported by a watchman server using the capability name
<code>field-symlink_target</code>.</li><li>Fixed an issue where watchman may not reap child processes spawned by
triggers.</li><li>Fixed an issue where watchman may block forever during shutdown if there are
other connected clients.</li><li>Added <code>hint_num_dirs</code> configuration option.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pywatchman-140---">pywatchman 1.4.0 (????-??-??)<a class="hash-link" href="#pywatchman-140---" title="Direct link to heading">​</a></h3><p>(These changes have not yet been released to pypi)</p><ul><li>Added immutable version of data results to bser. This is cheaper to build from
a serialized bser representation than the mutable version and is better suited
to large result sets received from watchman.</li><li>Fixed a number of misc. portability issues</li><li>Added Python 3.x support</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-450-2016-02-18">Watchman 4.5.0 (2016-02-18)<a class="hash-link" href="#watchman-450-2016-02-18" title="Direct link to heading">​</a></h3><ul><li>Fixed an inotify race condition for non-atomic directory replacements that was
introduced in Watchman 4.4.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-440-2016-02-02">Watchman 4.4.0 (2016-02-02)<a class="hash-link" href="#watchman-440-2016-02-02" title="Direct link to heading">​</a></h3><ul><li>Added state-enter and state-leave commands can allow subscribers to more
intelligently settle/coalesce events around hg update or builds.</li><li>Fixed an issue where subscriptions could double-notify for the same events.</li><li>Fixed an issue where subscriptions that never match any files add
O(all-observed-files) CPU cost to every subscription dispatch</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-430-2015-12-14">Watchman 4.3.0 (2015-12-14)<a class="hash-link" href="#watchman-430-2015-12-14" title="Direct link to heading">​</a></h3><ul><li>Improved handling of case insensitive renames; halved the memory usage and
doubled crawl speed on OS X.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-420-2015-12-08">Watchman 4.2.0 (2015-12-08)<a class="hash-link" href="#watchman-420-2015-12-08" title="Direct link to heading">​</a></h3><ul><li>Increased strictness of checks for symlinks; rather than just checking whether
the leaf of a directory tree is a symlink, we now check each component down
from the root of the watch. This improves detection and processing for
directory-to-symlink (and vice versa) transitions.</li><li>Increased priority of the watchman process on OS X.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pywatchman-130-2015-10-22">pywatchman 1.3.0 (2015-10-22)<a class="hash-link" href="#pywatchman-130-2015-10-22" title="Direct link to heading">​</a></h3><ul><li>Added <code>watchman-make</code> and <code>watchman-wait</code> commands</li><li>Added pure python implementation of BSER</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-410-2015-10-20">Watchman 4.1.0 (2015-10-20)<a class="hash-link" href="#watchman-410-2015-10-20" title="Direct link to heading">​</a></h3><ul><li>Fixed an issue where symlink size was always reported as 0 on OS X using the
new bulkstat functionality</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-400-2015-10-19">Watchman 4.0.0 (2015-10-19)<a class="hash-link" href="#watchman-400-2015-10-19" title="Direct link to heading">​</a></h3><ul><li>Fixed an issue where a directory that was replaced by a symlink would cause a
symlink traversal instead of correctly updating the type of the node and
marking the children removed.</li><li>Fixed a debugging log line that was emitted at the wrong log level on every
directory traversal.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-390-2015-10-12">Watchman 3.9.0 (2015-10-12)<a class="hash-link" href="#watchman-390-2015-10-12" title="Direct link to heading">​</a></h3><ul><li>Fixed an issue where dir renames on OS X could cause us to lose track of the
files inside the renamed dir</li><li>Fixed an issue where dir deletes and replacements on Linux could cause us to
lose track of the files inside the replaced dir (similar to the OS X issue
above in manifestation, but a different root cause).</li><li>Improved (re)crawl speed for dirs with more than a couple of entries on
average (improvement can be up to 5x for dirs with up to 64 entries on
average). You may now tune the <code>hint_num_files_per_dir</code> setting in your
<code>.watchmanconfig</code> to better match your tree.
<a href="/watchman/docs/config#hint_num_files_per_dir">More details</a></li><li>Improved (re)crawl speed on OS X 10.10 and later by using <code>getattrlistbulk</code>.
This allows us to improve the data:syscall ratio during crawling and can
improve throughput by up to 40% for larger trees.</li><li>Add optional <code>sync_timeout</code> to the <code>clock</code> command</li><li>Avoid accidentally passing descriptors other than the stdio streams when we
spawn the watchman service.</li><li>Fixed a race condition where we could start two sets of watcher threads for
the same dir if two clients issue a <code>watch</code> or <code>watch-project</code> at the same
time</li><li>Added a helpful error for a tmux + launchd issue on OS X</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-380-2015-09-14">Watchman 3.8.0 (2015-09-14)<a class="hash-link" href="#watchman-380-2015-09-14" title="Direct link to heading">​</a></h3><ul><li>Improved latency of processing kernel notifications. It should now be far less
likely to run into an notification queue overflow.</li><li>Improved idle behavior. There were a couple of places where watchman would
wake up more often than was strictly needed and these have now been fixed.
This is mostly of interest to laptop users on battery power.</li><li>Improved inotify move tracking. Some move operations could cause watchman to
become confused and trigger a recrawl. This has now been resolved.</li><li>Hardened statedir and permissions. There was a possibility of a symlink attack
and this has now been mitigated by re-structuring the statedir layout.</li><li>Fixed a possible deadlock in the idle watch reaper</li><li>Fixed an issue where the watchman -p log-level debug could drop log
notifications in the CLI</li><li>Disabled the IO-throttling-during-crawl that we added in 3.7. It proved to be
more harmful than beneficial.</li><li><code>-j</code> CLI option now accepts either JSON or BSER encoded command on stdin</li><li>Added <a href="/watchman/docs/capabilities">capabilities</a> to the server, and added the
<a href="/watchman/docs/cmd/version#capabilityCheck">capabilityCheck</a> method to the python and
node clients.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pywatchman-120-2015-08-15">pywatchman 1.2.0 (2015-08-15)<a class="hash-link" href="#pywatchman-120-2015-08-15" title="Direct link to heading">​</a></h3><ul><li>Added the <code>capabilityCheck</code> method</li><li>Added <code>SocketTimeout</code> exception to distinguish timeouts from protocol level
exceptions</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fb-watchman-130-for-node-2015-08-15">fb-watchman 1.3.0 for node (2015-08-15)<a class="hash-link" href="#fb-watchman-130-for-node-2015-08-15" title="Direct link to heading">​</a></h3><ul><li>Added the <a href="/watchman/docs/nodejs#checking-for-watchman-availability">capabilityCheck</a>
method.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pywatchman-100-2015-08-06">pywatchman 1.0.0 (2015-08-06)<a class="hash-link" href="#pywatchman-100-2015-08-06" title="Direct link to heading">​</a></h3><ul><li>First official pypi release, thanks to <a href="https://github.com/kwlzn" target="_blank" rel="noopener noreferrer">@kwlzn</a> for
setting up the release machinery for this.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-370-2015-08-05">Watchman 3.7.0 (2015-08-05)<a class="hash-link" href="#watchman-370-2015-08-05" title="Direct link to heading">​</a></h3><p>(Watchman 3.6.0 wasn&#x27;t formally released)</p><ul><li>Fixed bug where <code>query match</code> on <code>foo*.java</code> with <code>wholename</code> scope would
incorrectly match <code>foo/bar/baz.java</code>.</li><li>Added <code>src/**/*.java</code> recursive glob pattern support to <code>query match</code>.</li><li>Added options dictionary to <code>query</code>&#x27;s <code>match</code> operator.</li><li>Added <code>includedotfiles</code> option to <code>query match</code> to include files whose names
start with <code>.</code>.</li><li>Added <code>noescape</code> option to <code>query match</code> to make <code>\</code> match literal <code>\</code>.</li><li>We&#x27;ll now automatically age out and stop watches. See
<a href="/watchman/docs/config#idle_reap_age_seconds">idle_reap_age_seconds</a> for more information.</li><li><code>watch-project</code> will now try harder to re-use an existing watch and avoid
creating an overlapping watch.</li><li>Reduce I/O priority during crawling on systems that support this</li><li>Fixed issue with the <code>long long</code> data type in the python BSER module</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fb-watchman-120-for-node-2015-07-11">fb-watchman 1.2.0 for node (2015-07-11)<a class="hash-link" href="#fb-watchman-120-for-node-2015-07-11" title="Direct link to heading">​</a></h3><ul><li>Updated the node client to more gracefully handle <code>undefined</code> values in
objects when serializing them; we now omit keys whose values are <code>undefined</code>
rather than throw an exception.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-350-2015-06-29">Watchman 3.5.0 (2015-06-29)<a class="hash-link" href="#watchman-350-2015-06-29" title="Direct link to heading">​</a></h3><ul><li>Fix the version number reported by watchman.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-340-2015-06-29">Watchman 3.4.0 (2015-06-29)<a class="hash-link" href="#watchman-340-2015-06-29" title="Direct link to heading">​</a></h3><ul><li><code>trigger</code> now supports an optional <code>relative_root</code> argument. The trigger is
evaluated with respect to this subdirectory. See
<a href="/watchman/docs/cmd/trigger#relative-roots">trigger</a> for more.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fb-watchman-110-for-node-2015-06-25">fb-watchman 1.1.0 for node (2015-06-25)<a class="hash-link" href="#fb-watchman-110-for-node-2015-06-25" title="Direct link to heading">​</a></h3><ul><li>Updated the node client to handle 64-bit integer values using the
<a href="https://www.npmjs.com/package/node-int64" target="_blank" rel="noopener noreferrer">node-int64</a>. These are most likely
to show up if your query fields include <code>size</code> and you have files larger than
2GB in your watched root.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fb-watchman-100-for-node-2015-06-23">fb-watchman 1.0.0 for node (2015-06-23)<a class="hash-link" href="#fb-watchman-100-for-node-2015-06-23" title="Direct link to heading">​</a></h3><ul><li>Updated the node client to support <a href="/watchman/docs/bser">BSER</a> encoding, fixing a
quadratic performance issue in the JSON stream decoder that was used
previously.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchman-330-2015-06-22">Watchman 3.3.0 (2015-06-22)<a class="hash-link" href="#watchman-330-2015-06-22" title="Direct link to heading">​</a></h3><ul><li><code>query</code> and <code>subscribe</code> now support an optional <code>relative_root</code> argument.
Inputs and outputs are evaluated with respect to this subdirectory. See
<a href="/watchman/docs/file-query#relative-roots">File Queries</a> for more.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/watchman/tree/main/website/docs/release-notes.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/watchman/docs/install"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Installation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/watchman/docs/cli-options"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Command Line</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#watchman-v2020071300" class="table-of-contents__link toc-highlight">Watchman v2020.07.13.00</a></li><li><a href="#watchman-490-2017-08-24" class="table-of-contents__link toc-highlight">Watchman 4.9.0 (2017-08-24)</a></li><li><a href="#watchman-480-never-formally-released" class="table-of-contents__link toc-highlight">Watchman 4.8.0 (never formally released)</a></li><li><a href="#watchman-470-2016-09-10" class="table-of-contents__link toc-highlight">Watchman 4.7.0 (2016-09-10)</a></li><li><a href="#watchman-460-2016-07-09" class="table-of-contents__link toc-highlight">Watchman 4.6.0 (2016-07-09)</a></li><li><a href="#pywatchman-140---" class="table-of-contents__link toc-highlight">pywatchman 1.4.0 (????-??-??)</a></li><li><a href="#watchman-450-2016-02-18" class="table-of-contents__link toc-highlight">Watchman 4.5.0 (2016-02-18)</a></li><li><a href="#watchman-440-2016-02-02" class="table-of-contents__link toc-highlight">Watchman 4.4.0 (2016-02-02)</a></li><li><a href="#watchman-430-2015-12-14" class="table-of-contents__link toc-highlight">Watchman 4.3.0 (2015-12-14)</a></li><li><a href="#watchman-420-2015-12-08" class="table-of-contents__link toc-highlight">Watchman 4.2.0 (2015-12-08)</a></li><li><a href="#pywatchman-130-2015-10-22" class="table-of-contents__link toc-highlight">pywatchman 1.3.0 (2015-10-22)</a></li><li><a href="#watchman-410-2015-10-20" class="table-of-contents__link toc-highlight">Watchman 4.1.0 (2015-10-20)</a></li><li><a href="#watchman-400-2015-10-19" class="table-of-contents__link toc-highlight">Watchman 4.0.0 (2015-10-19)</a></li><li><a href="#watchman-390-2015-10-12" class="table-of-contents__link toc-highlight">Watchman 3.9.0 (2015-10-12)</a></li><li><a href="#watchman-380-2015-09-14" class="table-of-contents__link toc-highlight">Watchman 3.8.0 (2015-09-14)</a></li><li><a href="#pywatchman-120-2015-08-15" class="table-of-contents__link toc-highlight">pywatchman 1.2.0 (2015-08-15)</a></li><li><a href="#fb-watchman-130-for-node-2015-08-15" class="table-of-contents__link toc-highlight">fb-watchman 1.3.0 for node (2015-08-15)</a></li><li><a href="#pywatchman-100-2015-08-06" class="table-of-contents__link toc-highlight">pywatchman 1.0.0 (2015-08-06)</a></li><li><a href="#watchman-370-2015-08-05" class="table-of-contents__link toc-highlight">Watchman 3.7.0 (2015-08-05)</a></li><li><a href="#fb-watchman-120-for-node-2015-07-11" class="table-of-contents__link toc-highlight">fb-watchman 1.2.0 for node (2015-07-11)</a></li><li><a href="#watchman-350-2015-06-29" class="table-of-contents__link toc-highlight">Watchman 3.5.0 (2015-06-29)</a></li><li><a href="#watchman-340-2015-06-29" class="table-of-contents__link toc-highlight">Watchman 3.4.0 (2015-06-29)</a></li><li><a href="#fb-watchman-110-for-node-2015-06-25" class="table-of-contents__link toc-highlight">fb-watchman 1.1.0 for node (2015-06-25)</a></li><li><a href="#fb-watchman-100-for-node-2015-06-23" class="table-of-contents__link toc-highlight">fb-watchman 1.0.0 for node (2015-06-23)</a></li><li><a href="#watchman-330-2015-06-22" class="table-of-contents__link toc-highlight">Watchman 3.3.0 (2015-06-22)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/watchman/docs/install">Documentation</a></li><li class="footer__item"><a href="https://github.com/facebook/watchman" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/watchman/docs/troubleshooting">Getting Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Related Projects</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://sapling-scm.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sapling<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.fb.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.fb.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/watchman/img/meta_opensource_logo_negative.svg" alt="Meta Open Source Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/watchman/img/meta_opensource_logo_negative.svg" alt="Meta Open Source Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Copyright © 2023 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/watchman/assets/js/runtime~main.9f7e7ff6.js"></script>
<script src="/watchman/assets/js/main.eda62e9f.js"></script>
</body>
</html>