<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-config">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Configuration Files | Watchman</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://facebook.github.io/watchman/img/watchman-social-card.png"><meta data-rh="true" name="twitter:image" content="https://facebook.github.io/watchman/img/watchman-social-card.png"><meta data-rh="true" property="og:url" content="https://facebook.github.io/watchman/docs/config"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuration Files | Watchman"><meta data-rh="true" name="description" content="Watchman looks for configuration files in two places:"><meta data-rh="true" property="og:description" content="Watchman looks for configuration files in two places:"><link data-rh="true" rel="icon" href="/watchman/img/favicon.png"><link data-rh="true" rel="canonical" href="https://facebook.github.io/watchman/docs/config"><link data-rh="true" rel="alternate" href="https://facebook.github.io/watchman/docs/config" hreflang="en"><link data-rh="true" rel="alternate" href="https://facebook.github.io/watchman/docs/config" hreflang="x-default"><link rel="stylesheet" href="/watchman/assets/css/styles.020fe8fb.css">
<link rel="preload" href="/watchman/assets/js/runtime~main.9f7e7ff6.js" as="script">
<link rel="preload" href="/watchman/assets/js/main.eda62e9f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/watchman/"><div class="navbar__logo"><img src="/watchman/img/logo.png" alt="Watchman Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/watchman/img/logo.png" alt="Watchman Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Watchman</b></a><a class="navbar__item navbar__link" href="/watchman/docs/install">Documentation</a><a class="navbar__item navbar__link" href="/watchman/support">Support</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/watchman" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/install">Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/watchman/docs/cli-options">Invocation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/watchman/docs/cli-options">Command Line</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/watchman/docs/watchman-make">watchman-make</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/watchman/docs/watchman-wait">watchman-wait</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/watchman/docs/watchman-replicate-subscription">watchman-replicate-subscription</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/watchman/docs/cppclient">C++ Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/watchman/docs/nodejs">NodeJS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/watchman/docs/config">Configuration Files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/watchman/docs/socket-interface">Socket Interface</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/capabilities">Compatibility</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/cmd/clock">Commands</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/clockspec">Queries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/expr/allof">Expression Terms</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/watchman/docs/bser">Internals</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/watchman/docs/troubleshooting">Troubleshooting</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/watchman/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Invocation</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configuration Files</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuration Files</h1></header><p>Watchman looks for configuration files in two places:</p><ul><li>The global configuration file <code>/etc/watchman.json</code></li><li>The root specific configuration file <code>.watchmanconfig</code></li></ul><p>When watching a root, if a valid JSON file named <code>.watchmanconfig</code> is present in
the root directory, watchman will load it and use it as a source of
configuration information specific to that root.</p><p>The global configuration path can be changed by passing the <code>--enable-conffile</code>
option to configure when you build watchman. This documentation refers to it as
<code>/etc/watchman.json</code> throughout, just be aware that your particular installation
may locate it elsewhere. In addition, the environmental variable
<code>$WATCHMAN_CONFIG_FILE</code> will override the default location.</p><p>If the global configuration file does not exist, Watchman will fall back on that
path with &quot;.default&quot; appended (e.g. /etc/watchman.json.default). This allows the
Watchman system package to provide different configuration defaults, like
setting enforce_root_files to true.</p><p>Changes to the <code>.watchmanconfig</code> or <code>/etc/watchman.json</code> files are not picked up
automatically; you will need to remove and re-add the watch (for
<code>.watchmanconfig</code>) or restart watchman (for <code>/etc/watchman.json</code>) for those
changes to take effect.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resolution--scoping">Resolution / Scoping<a class="hash-link" href="#resolution--scoping" title="Direct link to heading">​</a></h3><p>There are three configuration scopes:</p><ul><li><strong>local</strong> - the option value is read from the <code>.watchmanconfig</code> file in the
associated root.</li><li><strong>global</strong> - the option value is read from the <code>/etc/watchman.json</code> file</li><li><strong>fallback</strong> - the option value is read from the <code>.watchmanconfig</code> file. If
the option was not present in the <code>.watchmanconfig</code> file, then read it from
the <code>/etc/watchman.json</code> file.</li></ul><p>This table shows the scoping and availability of the various options:</p><table><thead><tr><th>Option</th><th>Scope</th><th>Since version</th></tr></thead><tbody><tr><td><code>settle</code></td><td>local</td><td></td></tr><tr><td><code>root_restrict_files</code></td><td>global</td><td>deprecated in 3.1</td></tr><tr><td><code>root_files</code></td><td>global</td><td>3.1</td></tr><tr><td><code>enforce_root_files</code></td><td>global</td><td>3.1</td></tr><tr><td><code>illegal_fstypes</code></td><td>global</td><td>2.9.8</td></tr><tr><td><code>illegal_fstypes_advice</code></td><td>global</td><td>2.9.8</td></tr><tr><td><code>ignore_vcs</code></td><td>local</td><td>2.9.3</td></tr><tr><td><code>ignore_dirs</code></td><td>local</td><td>2.9.3</td></tr><tr><td><code>gc_age_seconds</code></td><td>local</td><td>2.9.4</td></tr><tr><td><code>gc_interval_seconds</code></td><td>local</td><td>2.9.4</td></tr><tr><td><code>fsevents_latency</code></td><td>fallback</td><td>3.2</td></tr><tr><td><code>idle_reap_age_seconds</code></td><td>local</td><td>3.7</td></tr><tr><td><code>hint_num_files_per_dir</code></td><td>fallback</td><td>3.9</td></tr><tr><td><code>hint_num_dirs</code></td><td>fallback</td><td>4.6</td></tr><tr><td><code>suppress_recrawl_warnings</code></td><td>fallback</td><td>4.7</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-options">Configuration Options<a class="hash-link" href="#configuration-options" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="settle">settle<a class="hash-link" href="#settle" title="Direct link to heading">​</a></h3><p>Specifies the settle period in <em>milliseconds</em>. This controls how long the
filesystem should be idle before dispatching triggers. The default value is 20
milliseconds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="root_files">root_files<a class="hash-link" href="#root_files" title="Direct link to heading">​</a></h3><p><em>Since 3.1.</em></p><p>Specifies a list of files that, if present in a directory, identify that
directory as the root of a project.</p><p>If left unspecified, to aid in transitioning between versions, watchman will use
the value of the now deprecated <a href="#root_restrict_files">root_restrict_files</a>
configuration setting.</p><p>If neither <code>root_files</code> nor <code>root_restrict_files</code> is specified in the
configuration, watchman will use a default value consisting of:</p><ul><li><code>.git</code></li><li><code>.hg</code></li><li><code>.svn</code></li><li><code>.watchmanconfig</code></li></ul><p>Watchman will add <code>.watchmanconfig</code> to whatever value is specified for this
configuration value if it is not present.</p><p>This example causes only <code>.watchmanconfig</code> to be considered as a project root
file:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;root_files&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;.watchmanconfig&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See the <a href="/watchman/docs/cmd/watch-project">watch-project</a> command for more information.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enforce_root_files">enforce_root_files<a class="hash-link" href="#enforce_root_files" title="Direct link to heading">​</a></h3><p><em>Since 3.1.</em></p><p>This is a boolean option that defaults to <code>false</code>. If it is set to <code>true</code> then
the <a href="/watchman/docs/cmd/watch">watch</a> command will only succeed if the requested directory
contains one of the files listed by the <a href="#root_files">root_files</a> configuration
option, and the <a href="/watchman/docs/cmd/watch-project">watch-project</a> command will only succeed
if a valid project root is found.</p><p>If left unspecified, to aid in transitioning between versions, watchman will
check to see if the now deprecated <a href="#root_restrict_files">root_restrict_files</a>
configuration setting is present. If it is found then the effective value of
<code>enforce_root_files</code> is set to <code>true</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="root_restrict_files">root_restrict_files<a class="hash-link" href="#root_restrict_files" title="Direct link to heading">​</a></h3><p><em>Deprecated starting in version 3.1; use <a href="#root_files">root_files</a> and
<a href="#enforce_root_files">enforce_root_files</a> to effect the same behavior.</em></p><p>Specifies a list of files, at least one of which should be present in a
directory for watchman to add it as a root. By default there are no
restrictions.</p><p>For example,</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;root_restrict_files&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;.git&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.hg&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>will allow watches only in the top level of Git or Mercurial repositories.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="illegal_fstypes">illegal_fstypes<a class="hash-link" href="#illegal_fstypes" title="Direct link to heading">​</a></h3><p>Specifies a list of filesystem types that watchman is prohibited to attempt to
watch. Watchman will determine the filesystem type of the root of a watch; if
the typename is present in the <code>illegal_fstypes</code> list, the watch will be
prohibited. You may also specify <code>illegal_fstypes_advice</code> as a string with
additional advice to your user. The purpose of this configuration option is
largely to prevent the use of Watchman on network mounted filesystems. On Linux
systems, Watchman may not be able to determine the precise type name of a
mounted filesystem. If the filesystem type is not known to watchman, it will be
reported as <code>unknown</code>.</p><p>For example,</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;illegal_fstypes&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;nfs&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cifs&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;smb&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;illegal_fstypes_advice&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;use a local directory&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>will prevent watching dirs mounted on network filesystems and provide the advice
to use a local directory. You may omit the <code>illegal_fstypes_advice</code> setting to
use a default suggestion to relocate the directory to local disk.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ignore_vcs">ignore_vcs<a class="hash-link" href="#ignore_vcs" title="Direct link to heading">​</a></h3><p>Apply special VCS ignore logic to the set of named dirs. This option has a
default value of <code>[&quot;.git&quot;, &quot;.hg&quot;, &quot;.svn&quot;]</code>. Dirs that match this option are
observed and watched using special shallow logic. The shallow watch allows
watchman to mildly abuse the version control directories to store its query
cookie files and to observe VCS locking activity without having to watch the
entire set of VCS data for large trees.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ignore_dirs">ignore_dirs<a class="hash-link" href="#ignore_dirs" title="Direct link to heading">​</a></h3><p>Dirs that match are completely ignored by watchman. This is useful to ignore a
directory that contains only build products and where file change notifications
are unwanted because of the sheer volume of files.</p><p>For example,</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;ignore_dirs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;build&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>would ignore the <code>build</code> directory at the top level of the watched tree, and
everything below it. It will never appear in the watchman query results for the
tree.</p><p>On Linux systems, <code>ignore_dirs</code> is respected at the OS level; the kernel simply
will not tell watchman about changes to ignored dirs. macOS and Windows have
limited or no support for this, so watchman needs to process and ignore this
class of change.</p><p>For large trees or especially busy build dirs, it is recommended that you move
the busy build dirs out of the tree for more optimal performance.</p><p>Since version 2.9.9, if you list a dir in <code>ignore_dirs</code> that is also listed in
<code>ignore_vcs</code>, the <code>ignore_dirs</code> placement will take precedence. This may not
sound like a big deal, but since <code>ignore_vcs</code> is used as a hint to for the
placement of <a href="/watchman/docs/cookies">cookie files</a>, having these two options overlap in
earlier versions would break watchman queries.</p><p><em>Since 4.6.</em></p><p>On macOS the first 8 items listed in <code>ignore_dirs</code> can be accelerated at the OS
level. This means that changes to those paths are not even communicated to the
watchman service. Entries beyond the first 8 are processed and ignored by
watchman. If your workload is prone to recrawl events you will want to
prioritize your <code>ignore_dirs</code> list so that the most busy ignored locations
occupy the first 8 positions in this list.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gc_age_seconds">gc_age_seconds<a class="hash-link" href="#gc_age_seconds" title="Direct link to heading">​</a></h3><p>Deleted files (and dirs) older than this are periodically pruned from the
internal view of the filesystem. Until they are pruned, they will be visible to
queries but will have their <code>exists</code> field set to <code>false</code>. Once they are pruned,
watchman will remember the most recent clock value of the pruned nodes. Any
since queries based on a clock prior to the last prune clock will be treated as
a fresh instance query. This allows a client to detect and choose how to handle
the case where they have missed changes. See <code>is_fresh_instance</code> elsewhere in
this document for more information. The default for this is <code>43200</code> (12 hours).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gc_interval_seconds">gc_interval_seconds<a class="hash-link" href="#gc_interval_seconds" title="Direct link to heading">​</a></h3><p>How often to check for, and prune out, deleted nodes per the <code>gc_age_seconds</code>
option description above. The default for this is <code>86400</code> (24 hours). Set this
to <code>0</code> to disable the periodic pruning operation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fsevents_latency">fsevents_latency<a class="hash-link" href="#fsevents_latency" title="Direct link to heading">​</a></h3><p>Controls the latency parameter that is passed to <code>FSEventStreamCreate</code> on macOS.
The value is measured in seconds. The fixed value of this parameter prior to
version 3.2 of watchman was <code>0.0001</code> seconds. Starting in version 3.2 of
watchman, the default is now <code>0.01</code> seconds and can be controlled on a per-root
basis.</p><p>If you observe problems with <code>kFSEventStreamEventFlagUserDropped</code> increasing the
latency parameter will allow the system to batch more change notifications
together and operate more efficiently.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fsevents_try_resync">fsevents_try_resync<a class="hash-link" href="#fsevents_try_resync" title="Direct link to heading">​</a></h3><p>This is macOS specific.</p><p><em>Since 4.6.</em></p><p>Defaults to <code>false</code>. If set to <code>true</code>, if a watch receives a
<code>kFSEventStreamEventFlagUserDropped</code> event, attempt to resync from the
<code>fsevents</code> journal if it is available. The journal may not be available if one
or more volumes are mounted read-only, if the administrator has purged the
journal, or if the <code>fsevents</code> id numbers have rolled over.</p><p>This resync operation is advantageous because it effectively allows rewinding
and replaying the event stream from a known point in time and avoids the need to
recrawl the entire watch.</p><p>If this option is set to <code>false</code>, or if the journal is not available, the
original strategy of recrawling the watched directory tree is used instead.</p><p><em>Since 4.7.</em></p><p>The default changed to <code>true</code>. In addition, this resync strategy is now also
applied to <code>kFSEventStreamEventFlagKernelDropped</code> events.</p><p><em>Since December 2021.</em></p><p>The default changed to <code>false</code>. There are possible undiagnosed correctness
issues with this setting.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prefer_split_fsevents_watcher">prefer_split_fsevents_watcher<a class="hash-link" href="#prefer_split_fsevents_watcher" title="Direct link to heading">​</a></h3><p>This is macOS specific.</p><p>Defaults to <code>false</code>. If set to <code>true</code>, Watchman will use several FSEvents
streams to watch a directory hierarchy instead of a single stream. This has been
shown to significantly reduce the number of <code>kFSEventStreamEventFlagUserDropped</code>
events for workflows issuing heavy writes to a top-level directory that is
listed in <a href="#ignore_dirs">ignore_dirs</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="idle_reap_age_seconds">idle_reap_age_seconds<a class="hash-link" href="#idle_reap_age_seconds" title="Direct link to heading">​</a></h3><p><em>Since 3.7.</em></p><p>How many seconds a watch can remain idle before becoming a candidate for
reaping, measured in seconds. The default for this is <code>432000</code> (5 days). Set
this to <code>0</code> to prevent reaping.</p><p>A watch is considered to be idle when it has had no commands that operate on it
for <code>idle_reap_age_seconds</code>. If an idle watch has no triggers and no
subscriptions then it will be cancelled, releasing the associated operating
system resources, and removed from the state file.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hint_num_files_per_dir">hint_num_files_per_dir<a class="hash-link" href="#hint_num_files_per_dir" title="Direct link to heading">​</a></h3><p><em>Since 3.9.</em></p><p>Used to pre-size hash tables used to track files per directory. This is most
impactful during the initial crawl of the filesystem. Setting this too small
will increase the chance of a hash insert having a collision and drive up the
cost of the insert and subsequent gets.</p><p>Prior to version 3.9 of watchman this value was fixed at <code>2</code>. Starting in
version 3.9 the default value is <code>64</code> and can be configured via this setting in
the <code>.watchmanconfig</code> or the global <code>/etc/watchman.json</code> configuration file.</p><p>Setting this value very large increases the memory overhead per directory in the
tree; the value is rounded up to the next power of two and pre-allocated in an
array of pointers. On a 64-bit system multiply that number by 8 to arrive at the
number of bytes of overhead (halve this on a 32-bit system). The overhead is
doubled when using a case insensitive filesystem.</p><p>The ideal size from a time complexity perspective is the number of files in your
largest directory. From a space complexity perspective, the ideal size is 1; you
would pay the cost of the collisions during the initial crawl and have a more
optimal memory usage. Since watchman is primarily employed as an accelerator,
we&#x27;d recommend biasing towards using more memory and taking less time to run.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hint_num_dirs">hint_num_dirs<a class="hash-link" href="#hint_num_dirs" title="Direct link to heading">​</a></h3><p><em>Since 4.6</em></p><p>Used to pre-size hash tables that are used to track the total set of files in
the entire watched tree. The default value for this is 131072.</p><p>The optimal size is a power-of-two larger than the number of directories in your
tree; running <code>find . -type d | wc -l</code> will tell you the number that you have.</p><p>Making this number too large is potentially wasteful of memory. Making this
number too small results in increased latency during crawling while the hash
tables are rebuilt.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="suppress_recrawl_warnings">suppress_recrawl_warnings<a class="hash-link" href="#suppress_recrawl_warnings" title="Direct link to heading">​</a></h3><p><em>Since 4.7</em></p><p>When set to <code>true</code>, watchman will not produce recrawl related warning fields in
the response PDUs of various requests. The default is <code>false</code>; the intent is
that someone in your organization should be aware of recrawls and be able to
manage the configuration and workload. Some sites employ an alternative
mechanism for sampling and reporting this to the right set of people and wish to
disable the warning so that it doesn&#x27;t appear in front of users that are unable
to make the appropriate configuration changes for themselves.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="eden_file_count_threshold_for_fresh_instance">eden_file_count_threshold_for_fresh_instance<a class="hash-link" href="#eden_file_count_threshold_for_fresh_instance" title="Direct link to heading">​</a></h3><p>This is specific to the EdenFS watcher</p><p>When set to a non-zero value, Watchman will return a <em>fresh instance</em> to since
queries/subscriptions if the number of changed files exceeds the configured
value. In particular, during large updates of the working copies, a lot of files
may have changed forcing both Watchman and EdenFS to fetch a significant amount
of metadata to answer these queries.</p><p>This behavior is only enabled if the query specifies the
<code>empty_on_fresh_instance</code> option or when this config is set to <code>0</code>. Default to
<code>10000</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/watchman/tree/main/website/docs/config.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/watchman/docs/nodejs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">NodeJS</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/watchman/docs/socket-interface"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Socket Interface</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#resolution--scoping" class="table-of-contents__link toc-highlight">Resolution / Scoping</a></li><li><a href="#configuration-options" class="table-of-contents__link toc-highlight">Configuration Options</a></li><li><a href="#settle" class="table-of-contents__link toc-highlight">settle</a></li><li><a href="#root_files" class="table-of-contents__link toc-highlight">root_files</a></li><li><a href="#enforce_root_files" class="table-of-contents__link toc-highlight">enforce_root_files</a></li><li><a href="#root_restrict_files" class="table-of-contents__link toc-highlight">root_restrict_files</a></li><li><a href="#illegal_fstypes" class="table-of-contents__link toc-highlight">illegal_fstypes</a></li><li><a href="#ignore_vcs" class="table-of-contents__link toc-highlight">ignore_vcs</a></li><li><a href="#ignore_dirs" class="table-of-contents__link toc-highlight">ignore_dirs</a></li><li><a href="#gc_age_seconds" class="table-of-contents__link toc-highlight">gc_age_seconds</a></li><li><a href="#gc_interval_seconds" class="table-of-contents__link toc-highlight">gc_interval_seconds</a></li><li><a href="#fsevents_latency" class="table-of-contents__link toc-highlight">fsevents_latency</a></li><li><a href="#fsevents_try_resync" class="table-of-contents__link toc-highlight">fsevents_try_resync</a></li><li><a href="#prefer_split_fsevents_watcher" class="table-of-contents__link toc-highlight">prefer_split_fsevents_watcher</a></li><li><a href="#idle_reap_age_seconds" class="table-of-contents__link toc-highlight">idle_reap_age_seconds</a></li><li><a href="#hint_num_files_per_dir" class="table-of-contents__link toc-highlight">hint_num_files_per_dir</a></li><li><a href="#hint_num_dirs" class="table-of-contents__link toc-highlight">hint_num_dirs</a></li><li><a href="#suppress_recrawl_warnings" class="table-of-contents__link toc-highlight">suppress_recrawl_warnings</a></li><li><a href="#eden_file_count_threshold_for_fresh_instance" class="table-of-contents__link toc-highlight">eden_file_count_threshold_for_fresh_instance</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/watchman/docs/install">Documentation</a></li><li class="footer__item"><a href="https://github.com/facebook/watchman" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/watchman/docs/troubleshooting">Getting Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Related Projects</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://sapling-scm.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sapling<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.fb.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.fb.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.fb.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/watchman/img/meta_opensource_logo_negative.svg" alt="Meta Open Source Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/watchman/img/meta_opensource_logo_negative.svg" alt="Meta Open Source Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Copyright © 2023 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/watchman/assets/js/runtime~main.9f7e7ff6.js"></script>
<script src="/watchman/assets/js/main.eda62e9f.js"></script>
</body>
</html>